{
    "class": "EMS\\CoreBundle\\Entity\\ContentType",
    "arguments": [],
    "properties": {
        "name": "publication",
        "pluralName": "Publications",
        "singularName": "Publication",
        "icon": "fa fa-file-o",
        "description": null,
        "indexTwig": null,
        "extra": null,
        "lockBy": null,
        "lockUntil": null,
        "circlesField": "",
        "businessIdField": "",
        "deleted": false,
        "askForOuuid": false,
        "color": null,
        "fieldType": {
            "class": "EMS\\CoreBundle\\Entity\\FieldType",
            "arguments": [],
            "properties": {
                "__initializer__": null,
                "__cloner__": null,
                "__isInitialized__": true,
                "type": "EMS\\CoreBundle\\Form\\DataField\\ContainerFieldType",
                "name": "source",
                "contentType": null,
                "deleted": false,
                "description": null,
                "options": [],
                "orderKey": 0,
                "parent": null,
                "children": []
            },
            "replaced": []
        },
        "labelField": "",
        "colorField": "",
        "userField": null,
        "dateField": null,
        "startDateField": null,
        "endDateField": null,
        "locationField": null,
        "refererFieldName": null,
        "categoryField": "",
        "ouuidField": null,
        "imageField": "",
        "videoField": null,
        "emailField": "",
        "assetField": "",
        "orderField": null,
        "sortBy": "",
        "sortOrder": null,
        "createRole": "ROLE_AUTHOR",
        "editRole": "ROLE_AUTHOR",
        "viewRole": "ROLE_AUTHOR",
        "publishRole": "ROLE_PUBLISHER",
        "deleteRole": "ROLE_WEBMASTER",
        "trashRole": "ROLE_WEBMASTER",
        "ownerRole": "not-defined",
        "orderKey": 2,
        "rootContentType": true,
        "editTwigWithWysiwyg": true,
        "webContent": true,
        "autoPublish": false,
        "templates": [],
        "views": [
            {
                "class": "EMS\\CoreBundle\\Entity\\View",
                "arguments": [],
                "properties": {
                    "name": "Overview",
                    "type": "ems.view.report",
                    "icon": "fa fa-list",
                    "options": {
                        "body": "{}",
                        "size": 0,
                        "template": "{% set must = {} %}\r\n\r\n{% set filterQuery = [ {\r\n  \"multi_match\": {\r\n    \"fields\": [\r\n      \"live_search\",\r\n      \"live_search._2gram\",\r\n      \"live_search._3gram\"\r\n    ],\r\n    \"query\": \"%query%\",\r\n    \"operator\": \"and\", \r\n    \"type\": \"bool_prefix\"\r\n  \r\n  } } ] %}\r\n  \r\n{% set columnLastUpdate %}{% verbatim %}{{ data.source._finalization_datetime|default('now')|date(\"d/m/Y (H:i)\") }}{% endverbatim %}{% endset %}\r\n{% set columnCreation %}{% verbatim %}{{ data.source.creation_date|date(\"d/m/Y (H:i)\") }}{% endverbatim %}{% endset %}\r\n\r\n{{ emsco_datatable(['preview'],[contentType.name], {\r\n    \"frontendOptions\": {\r\n        \"pageLength\": 100,\r\n        \"order\": [[0, 'asc']]\r\n    },\r\n    \"query\": {\r\n        \"bool\": {\r\n          \"must\": must|merge(filterQuery)\r\n        }\r\n      },\r\n    \"row_context\": \"{% set docInfo = [line.data.contentType, line.data.id]|join(':')|emsco_document_info %}{% set revisionId = line.data.id|get_revision_id(line.data.contentType) %}{% set liveId = 2 %}{% set previewId = 1 %}\",\r\n    \"columns\": [\r\n        {\r\n            \"label\": \"Label\",\r\n            \"template\": '<a href=\"' ~ \"{{path('data.revisions', {ouuid: data.id, type: data.contentType} ) }}\"~'\">' ~\"{{ data.source.label }}</a>\",\r\n            \"orderField\": \"label.alpha_order\"\r\n        },\r\n        {\r\n            \"label\": \"Title EN\",\r\n            \"template\": '{{ data.source.en.title }}'\r\n        },\r\n        {\r\n            \"label\": \"Title FR\",\r\n            \"template\": '{{ data.source.fr.title }}'\r\n        },\r\n        {\r\n            \"label\": \"Title NL\",\r\n            \"template\": '{{ data.source.nl.title }}'\r\n        },\r\n        { \r\n            \"label\": \"Last Update\", \r\n            \"template\": columnLastUpdate|format, \r\n            \"orderField\": \"_finalization_datetime\" \r\n        },\r\n        { \r\n            \"label\": \"Creation\", \r\n            \"template\": columnCreation|format, \r\n            \"orderField\": \"creation_date\" \r\n        },\r\n        {\r\n            \"label\": \"Live\",\r\n            \"template\": '<i style=\"color:{{ docInfo.published(\"live\") and docInfo.aligned(\"live\") ? \"green\" : \"red\" }};\" class=\"{{ docInfo.published(\"live\") and docInfo.aligned(\"live\") ? \"fa fa-check\" : \"fa fa-eye-slash\" }}\"></i>',\r\n        },\r\n        {\r\n            \"label\": \"Action\",\r\n            \"template\": '\r\n                <div class=\"btn-group btn-group-sm\" style=\"width: 130px;\">\r\n                  <a href=\"{{ docInfo.draft ? path(\"ems_revision_edit\", {revisionId: revisionId}) : docInfo.aligned(\"live\") ? path(\"revision.new-draft\", {type: data.contentType, ouuid: data.id }) : path(\"revision.publish_to\", {revisionId: revisionId, envId: liveId, redirectToUrl: path(\"data.customindexview\", {viewId: '~view.id~'})}) }}\" class=\"btn btn-default\" style=\"width: 100px;\">\r\n                    {{ docInfo.draft ? \"Edit draft\" : docInfo.aligned(\"live\") ? \"Edit\" : \"Publish in live\" }}\r\n                  </a>\r\n                  <button type=\"button\" class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\" aria-expanded=\"false\">\r\n                    <span class=\"caret\">\r\n                    </span>\r\n                    <span class=\"sr-only\">Toggle Dropdown\r\n                    </span>\r\n                  </button>\r\n                  <ul class=\"dropdown-menu\" role=\"menu\">\r\n                    <li>\r\n                      <a href=\"{{ path(\"data.revisions\", {ouuid: data.id, type: data.contentType} ) }}\">Revision</a>\r\n                    </li>\r\n                    {% if docInfo.draft %}\r\n                        <li><a href=\"{{ path(\"revision.publish_to\", {revisionId: revisionId, envId: previewId}) }}\">Publish in preview</a></li>\r\n                    {% elseif not docInfo.aligned(\\'live\\') %}\r\n                        <li><a href=\"{{ path(\"revision.new-draft\", {type: data.contentType, ouuid: data.id }) }}\">Edit</a></li>\r\n                    {% endif %}\r\n                  </ul>\r\n                </div>\r\n            '\r\n        }\r\n    ]\r\n}) }}",
                        "header": null,
                        "javascript": null
                    },
                    "orderKey": 1,
                    "public": false,
                    "role": "ROLE_USER"
                },
                "replaced": []
            }
        ],
        "defaultValue": null,
        "translationField": "",
        "localeField": null,
        "searchLinkDisplayRole": "not-defined",
        "createLinkDisplayRole": "ROLE_USER",
        "versionTags": [],
        "versionDateFromField": "",
        "versionDateToField": ""
    },
    "replaced": []
}